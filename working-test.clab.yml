name: working-test

topology:
  nodes:
    switch01:
      kind: linux
      image: alpine:latest
      exec:
        - apk add --no-cache net-snmp net-snmp-tools
        - mkdir -p /var/lib/net-snmp
        - echo "rocommunity public" > /etc/snmp/snmpd.conf
        - echo "sysLocation Lab Switch 01" >> /etc/snmp/snmpd.conf
        - echo "sysContact admin@lab.com" >> /etc/snmp/snmpd.conf
        - echo "agentAddress udp:161" >> /etc/snmp/snmpd.conf
        - nohup snmpd -Lo -f > /dev/null 2>&1 &
    
    switch02:
      kind: linux
      image: alpine:latest
      exec:
        - apk add --no-cache net-snmp net-snmp-tools
        - mkdir -p /var/lib/net-snmp
        - echo "rocommunity public" > /etc/snmp/snmpd.conf
        - echo "sysLocation Lab Switch 02" >> /etc/snmp/snmpd.conf
        - echo "sysContact admin@lab.com" >> /etc/snmp/snmpd.conf
        - echo "agentAddress udp:161" >> /etc/snmp/snmpd.conf
        - nohup snmpd -Lo -f > /dev/null 2>&1 &
